# Extracted content
Source: subjects/Dbd/Prácticas/Práctica 2/practica2_2019-1.pdf

### Page 1
Práctica 2
Procesamiento de transacciones y
mantenimiento de la integridad en
Oracle
![Page 1, Figure 1](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_001_img_001.png)
![Page 1, Figure 2](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_001_img_002.png)
![Page 1, Figure 3](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_001_img_003.png)
![Page 1, Figure 4](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_001_img_004.png)

### Page 2
2
Práctica 2.
 Conocer la sintaxis para la definición de transacciones en
Oracle.
 Comprobar experimentalmente el funcionamiento de las
instrucciones COMMIT y ROLLBACK.
 Comprobar experimentalmente los modos de comprobación
de la integridad en Oracle.
 Tabajar con restricciones diferibles.
Objetivos:
![Page 2, Figure 1](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_002_img_001.png)

### Page 3
3
Práctica 2. Definición de transacciones en Oracle
Operaciones de usuario:
 INICIO: inicio implícito.
En Oracle una transacción se inicia implícitamente cuando se ejecuta la
primera instrucción SQL (DML) desde que finalizó la última transacción o
desde que se realizó la conexión al servidor.
 FIN (con confirmación): COMMIT [WORK] (o FIN implícito)
(transacción confirmada parcialmente)
En Oracle una transacción finaliza implícitamente (con confirmación
parcial) cuando el usuario se desconecta del servidor.
 FIN (con anulación):  ROLLBACK [WORK]
(transacción anulada)
Nota: la sintaxis para la definición de transacciones en Oracle coincide
con la del SQL estándar excepto para la instrucción SQL de inicio de
una transacción (START TRANSACTION) que no existe en Oracle.
![Page 3, Figure 1](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_003_img_001.png)

### Page 4
4
Práctica 2. Definición de transacciones en Oracle
Operaciones de usuario:
 En Oracle se pueden definir puntos de SAVEPOINT para anular
parcialmente una transacción (SQL estándar):
SAVEPOINT nombre_savepoint
ROLLBACK TO nombre_savepoint
![Page 4, Figure 1](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_004_img_001.png)

### Page 5
5
Práctica 2. Definición de transacciones en Oracle
Operaciones de usuario:
INICIO IMPLÍCITO
…
…
SAVEPOINT marca1
…
…
SAVEPOINT marca2
…
…
IF … THEN ROLLBACK TO SAVEPOINT marca2
…
…
IF … THEN ROLLBACK TO SAVEPOINT marca1
…
COMMIT
![Page 5, Figure 1](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_005_img_001.png)

### Page 6
6
Práctica 2. Comprobación de R.I. en Oracle
Modos de comprobación de la integridad (se define para cada
restricción del esquema):
 Modo inmediato: la restricción se comprueba tras cada
operación SQL que pueda violar la restricción.
 Modo diferido: la restricción se comprueba al final de cada
transacción que contenga una instrucción que pueda violar la
restricción.
El modo de comprobación de una restricción puede ser fijo
(restricción no diferible) o se puede cambiar dinámicamente
durante la ejecución de una transacción (restricción diferible).
![Page 6, Figure 1](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_006_img_001.png)

### Page 7
7
Práctica 2. Comprobación de R.I. en Oracle
Acción del SGBD frente a la violación de una RI:
 Modo inmediato: el SGBD rechaza la instrucción SQL que
provoca la violación y la transacción continúa.
 Modo diferido: el SGBD anula la transacción.
![Page 7, Figure 1](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_007_img_001.png)

### Page 8
8
Práctica 2. Comprobación de R.I. en Oracle
Propiedad del cambio: diferible/no diferible
Inmediato Diferido
Modo
[[NOT] DEFERRABLE] [INITIALLY {IMMEDIATE|DEFERRED}]
![Page 8, Figure 1](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_008_img_001.png)

### Page 9
9
Práctica 2. Comprobación de R.I. en Oracle
La instrucción SQL que permite cambiar, localmente en una
transacción, el modo de una restricción definida como diferible
(DEFERRABLE), es:
SET CONSTRAINT {RI1, RI2, ... | ALL}
{IMMEDIATE  | DEFERRED}
![Page 9, Figure 1](../../public/subject-assets/Dbd/Prácticas/Práctica 2/practica2_2019-1/practica2_2019-1_page_009_img_001.png)
