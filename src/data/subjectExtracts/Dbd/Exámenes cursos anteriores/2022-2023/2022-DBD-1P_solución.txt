# Extracted content
Source: subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución.pdf

### Page 1
1er Parcial de Diseño y Gestión de Bases de Datos (03/11/2022)
APELLIDOS:
NOMBRE:

Cada una de las 10 cuestiones siguientes vale 0,125 puntos. Cada cuestión mal contestada
resta 1/3 de una respuesta correcta. Nota Test = (0,125  Respuestas_correctas) − ((0,125/3)
 Respuestas_incorrectas)
1. Indica cuál de las siguientes afirmaciones es FALSA:
a. La modificación de los datos de un bloque se hace en memoria secundaria.
b. Un bloque es la unidad de direccionamiento en un disco.
c. Un bloque es la unidad de transferencia de datos entre memoria principal y memoria
secundaria.
d. La memoria principal tiene reservados búfers para recibir los bloques que suben de
memoria secundaria.
2. Indica cuál de las siguientes afirmaciones es CIERTA:
a. Las transacciones facilitan el funcionamiento de los sistemas pero no son necesarias.
b. Cuando un SGBD confirma definitivamente una transacción es porque los búfers de
datos modificados por la transacción ya han sido grabados en el disco.
c. La confirmación de una transacción por el SGBD implica que la transacción ya no puede
ser anulada por el usuario.
d. La anulación de una transacción sólo puede ser realizada por el usuario que la está
ejecutando.
3. Indica cuál de las siguientes afirmaciones es FALSA:
a. Una restricción de integridad representa una propiedad que la base de datos debe
satisfacer en cualquier momento de su historia.
b. Existen dos momentos posibles de comprobación de una restricción de integridad,
inmediato y diferido.
c. Una restricción definida en modo diferido no puede ser no -diferible.
d. Todas las restricciones de integridad afectadas por una transacción se comprueban en
el mismo instante.
4. Indica la opción FALSA. Una restricción definida como " INMEDIATA NO DIFERIBLE":
a. Se comprueba tras cada operación que pueda violarla y no se puede cambiar al modo
diferido.
b. En caso de que se viole, la operación que la ha violado será abortada pero la transacción
continuará ejecutándose.
c. Su violación durante la ejecución de una transacción puede suponer que no se cumpla
la propiedad de atomicidad.
d. Supone que la propiedad representada por la restricción de integridad puede no estar
cumpliéndose cuando la transacción alcanza el commit.
![Page 1, Figure 1](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_001.png)

### Page 2
1er Parcial de Diseño y Gestión de Bases de Datos (03/11/2022)
5. Un bloque que está en memoria principal puede ser transferido a memoria secundaria
cuando:
a. su bit_sucio = 1 y su bit_reserva = 1
b. su bit_sucio = 1 y su bit_reserva = 0
c. su bit_sucio = 0 y su bit_reserva = 1
d. su bit_sucio = 0 y su bit_reserva = 0
6. Indica cuál de las siguientes afirmaciones es CIERTA si la estrategia de actualización
seguida por el SGBD es INMEDIATA:
a. Los bloques de datos actualizados por las transacciones en memoria principal se tienen
que transferir a disco antes de que el SGBD confirme definitivamente la transacción.
b. Los bloques de datos actualizados por las transacciones en memoria principal se
pueden transferir a disco antes de que el SGBD confirme definitivamente la
transacción.
c. Los bloques de datos actualizados por las transacciones en memoria principal no se
pueden transferir a disco antes de que el SGBD confirme definitivamente la
transacción.
d. Los bloques de datos actualizados por las transacciones en memoria principal se tienen
que transferir a disco inmediatamente después de la ejecución de la operación de
modificación.
7. ¿Qué es el principio de gestión del diario FORZAR ESCRITURA DEL DIARIO?
a. Antes de que una transacción sea confirmada por el SGBD, todas las entradas de diario
que hagan referencia a ella deben haber sido grabadas en el fichero de diario en disco.
b. Antes de que una transacción sea confirmada por el usuario, todas las entradas de
diario que hagan referencia a ella deben haber sido grabadas en el fichero de diario en
disco.
c. Antes de que un bloque de datos actualizado por una transacción sea transferido a
disco, las entradas del diario que hagan referencia a ella deben haber sido grabadas en
el diario en disco.
d. Antes de que las entradas del diario que hacen referencia a una transacción se graben
en el diario en disco, los bloques de datos actualizados por ella deben ser transferidos
a disco.
8. Indica cuál de las siguientes tareas no se realiza cuando se ejecuta un PUNTO DE
CONTROL:
a. Suspender temporalmente las transacciones activas.
b. Transferir a disco todos los bloques actualizados por transacciones confirmadas
después del último punto de control.
c. Anotar el punto de control en el búfer de diario y forzar la escritura del diario.
d. Informar al usuario.
![Page 2, Figure 1](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_002.png)

### Page 3
1er Parcial de Diseño y Gestión de Bases de Datos (03/11/2022)
9. Indica cuál de las siguientes afirmaciones es FALSA:
a. Si la estrategia de actualización es forzar, entonces no son útiles los puntos de control
para la recuperación de la base de datos.
b. Cuando una transacción es anulada, nunca será tenida en cuenta en la recuperación de
la base de datos.
c. Si ante cualquier problema que suceda, el diario no se ha perdido, la copia de seguridad
de la base de datos no es necesaria.
d. En un entorno monousuario las entradas del diario del tipo [leer, T, X] no sirven para
nada.
10. Dada la siguiente transacción T:










Si la estrategia de actualización seguida por el SGBD es INMEDIATA-NO FORZAR, indica en
qué momento (t) se puede llevar a disco la modificación realizada en el momento t 1 :

a. t1<t
b. tn+1<t
c. t1<t<tn+1
d. tn<t<tn+1

[INICIO T]
     UPDATE Departamento
     SET nombre = ‘Ventas’
     WHERE código = ‘d2’;
     …
     COMMIT;
tn+1
 SGBD
Confirmación
t1
tn
![Page 3, Figure 1](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_003.png)
![Page 3, Figure 2](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_003_img_001.png)
![Page 3, Figure 3](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_003_img_002.png)
![Page 3, Figure 4](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_003_img_003.png)
![Page 3, Figure 5](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_003_img_004.png)

### Page 4
1er Parcial de Diseño y Gestión de Bases de Datos (03/11/2022)

1.  (0,4 puntos) El siguiente diagrama de clases de una cadena de talleres de reparación:

quiere representa la información sobre las revisiones hechas a los vehículo. A continuación,
se muestran algunos datos a almacenar en la base de datos correspondiente a este diagrama:

Clase Vehículo: hay cuatro
vehículos cuyos datos se
muestra tabularmente



Clase Taller: hay cuatro
cuya información se
muestra tabularmente



Clase-asociación Revisión
• El vehículo 1234-BBB se revisó el 01/01/2021 en el taller T1 por un precio de 105€.
• El vehículo 5678-CCC se revisó el 23/05/2020 en el taller T2 por un precio de 250€.
• El vehículo 1234-BBB se revisó el 05/07/2021 en el taller T1 por un precio de 1.250€.
• El vehículo 9999-KLM se revisó el 30/10/2020 en el taller T1 por un precio de 50€.
¿Consideras que el diseño es correcto? Explica las razones y en caso de que no lo consideres
correcto, plantea una diagrama de clases correcto.





matrícula modelo dueño
1234-BBB Ford Fiesta Pepe Pérez
5678-CCC Opel Zafira Ana Echevarría
9999-KLM Renault 4 Aurora Boreal
1548-ÑÑÑ Cadillac Sevilla Manolo España
código nombre dirección
T1 Reparaciones Luis Carrer 32, 46470
T2 Taller Perfecto Calle B, 46190
T3 Taller Olé Azagador de Lliria, s/n, 46560
T4 Taller Pepa Benimaclet 16, 46020
![Page 4, Figure 1](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_004.png)
![Page 4, Figure 2](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_004_img_001.png)

### Page 5
1er Parcial de Diseño y Gestión de Bases de Datos (03/11/2022)

No es correcto porque el diagrama solo permite como máximo una revisión de cada
vehículo en cada taller. Es decir, un vehículo no puede ser revisado varias veces en un
mismo taller.
Opción 1:









Opción 2:











Estas dos soluciones no son exactamente equivalentes ya que en la opción 1 un vehículo no
se puede revisar dos veces el mismo día en el mismo taller. Esto sí que es posible en la
opción dos ya que no se define ninguna restricción sobre las fechas en el atributo
multivaluado.
VEHÍCULO

matrícula: {id}:{char}
modelo: {1..1}: {char}
dueño: {1..1}:{char}
TALLER

código: {id}:{char}
nombre: {1..1}:{char}
dirección: {1..1}:{char}
REVISIÓN

fecha: {id}: date
precio: {1..1}: real
id
id
{0 ..*}
 {0 ..*}
VEHÍCULO

matrícula: {id}:{char}
modelo: {1..1}: {char}
dueño: {1..1}:{char}
TALLER

código: {id}:{char}
nombre: {1..1}:{char}
dirección: {1..1}:{char}
REVISIÓN

datos_revisión:{1..*}:
fecha: {1..1}: date
precio: {1..1}: real
{0 ..*}
 {0 ..*}
![Page 5, Figure 1](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005.png)
![Page 5, Figure 2](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_001.png)
![Page 5, Figure 3](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_002.png)
![Page 5, Figure 4](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_003.png)
![Page 5, Figure 5](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_004.png)
![Page 5, Figure 6](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_005.png)
![Page 5, Figure 7](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_006.png)
![Page 5, Figure 8](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_007.png)
![Page 5, Figure 9](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_008.png)
![Page 5, Figure 10](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_009.png)
![Page 5, Figure 11](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_010.png)
![Page 5, Figure 12](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_011.png)
![Page 5, Figure 13](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_005_img_012.png)

### Page 6
1er Parcial de Diseño y Gestión de Bases de Datos (03/11/2022)
2. (0,35 puntos) Pon un ejemplo, distinto a los planteados en el tema 7, de relación con
una sola clave y con semántica (no con R, A, B, etc.) que NO esté en 2FN, explica los
problemas que supone el no estar en 2FN y normalízala para que s í lo esté.

Una relación está en 2FN si está en 1FN y todo atributo no -primo depende
funcionalmente en forma completa de la clave primaria de R.

En las relaciones que no están en 2FN se da redundancia y , por tanto, la actualización
(inserción, borrado y modificación) es más compleja.

La siguiente relación almacena información sobre la nota obtenida por cada alumno en
las asignaturas de las que ha estado matriculado.

Matriculado (dni, nom_alu, cod_asg, nom_asg, nota)
CP: {dni, cod_asg}
VNN: {nom_alu, nom_asg, nota}

Donde el dni determina el nombre del alumno y cod_asg determina nom_asg.

Esta relación no está en 2FN, ya que hay dependencias funcionales no completas respecto
a la clave primaria.

Paso a 2FN:

Matriculado (dni, cod_asg, nota)
CP: {dni, cod_asg}
VNN: {nota}
C. Aj: {dni} → Alumno
C. Aj: {cod_asg}→ Asignatura

 Alumno: (dni,nom_alu)
CP: {dni}
VNN: {nom_alu}
RI1. Todo dni de la tabla Alumno debe aparecer en dni de la tabla Matriculado

Asignatura (cod_asg, nom_asg)
CP: {cod_asg}
VNN: {nom_asg}
RI2. Todo cod_asg de Asignatura debe aparecer en la tabla Matriculado.

Nota: El ejemplo que se m uestra aquí está extraído de las transpare ncias del Tema 7. Hay
muchos otros ejemplos válidos posibles.
![Page 6, Figure 1](subjects/Dbd/Exámenes cursos anteriores/2022-2023/2022-DBD-1P_solución-images/2022-DBD-1P_solución_page_006.png)
