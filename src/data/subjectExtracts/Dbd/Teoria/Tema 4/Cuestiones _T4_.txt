# Extracted content
Source: subjects/Dbd/Teoria/Tema 4/Cuestiones _T4_.pdf

### Page 1
1
Diseño y Gestión de Bases de Datos
Ejercicios Tema 4
1. Pon un ejemplo, distinto al visto en teoría, de dos transacciones tales que los dos posibles planes en serie
proporcionen resultados distintos.
2. Para las anomalías de lectura sucia, lectura no repetible y pérdida de actualizaciones:
• Pon un plan ejemplo, lo más sencillo posible, en el que se dé esa anomalía.
• Determina si el plan es serializable por conflictos.
• ¿Se podrían dar entonces estos problemas en un plan seriabilizable por conflictos?
3. ¿Cuáles de los siguientes planes son serializables por conflictos? Indica para los que sean serializables cuál
es el plan en serie equivalente.
P1=r1(x),r3(x),w1(x),r2(x),w3(x),c1,c2,c3
P2=r1(x),r3(x),w3(x),w1(x),r2(x),c1,c2,c3
P3=r3(x),r2(x),w3(x),r1(x),w1(x),c1,c2,c3
P4=r3(x),r2(x),r1(x),w3(x),w1(x),c1,c2,c3
P5=r1(x),r2(x),r3(y),r4(z),w1(x),r2(y),w3(y),r1(y),r2(z),w4(z),r4(y),r1(z),c3,c4,
  c1,c2
4. Aplicar el protocolo de bloqueo B2F explícito a los ejemplos de las tres  anomalías de la cuestión 2. Si se
produce una situación de bloqueo mortal aplica un procedimiento de detección para resolverlo. (BE:
bloqueo de escritura, BL: bloqueo de lectura, DB: desbloqueo, PB: promoción de un bloqueo de lectura a
escritura, XB: degradación de un bloqueo de escritura a lectura).
5. Considera las transacciones siguientes, y construye un plan de ejecución concurrente, controlado por el
protocolo B2F explícito, que sea serializable por conflictos. Se pueden promover y degradar bloqueos.
T1= r1(x), w1(x), r1(y), w1(y), c1
T2= r2(z), r2(y), w2(y), r2(x), w2(x), c2
T3= r3(y), r3(z), w3(y), w3(z), c3
6. Escribe dos planes concurrentes de dos transacciones en los que se produzca la anomalía de la lectura
sucia, uno en el que no aparezca el problema de la anulación en cascada, y otro en el que sí aparezca.
7. Sean las siguientes transacciones:
T1= r1(x), w1(x), r1(y), w1(y), c1
T2= r2(z), r2(y), w2(y), r2(x), w2(x), c2
T3= r3(y), r3(z), w3(y), w3(z), c3
Y sean los siguientes planes de ejecución:
P1= r2(z), r2(y), w2(y), r3(y), r3(z), r1(x), w1(x), w3(y), w3(z), r2(x),
   r1(y), w1(y), c3, c1, w2(x), c2
P2= r3(y), r3(z), r1(x), w1(x), w3(y), w3(z), r2(z), r1(y), w1(y), c3, r2(y),
   w2(y), c1, r2(x), w2(x), c2
Aplica el protocolo OMT a los planes de ejecución P 1 y P 2 y determina si el protocolo permitiría su
ejecución suponiendo que los elementos de datos X, Y, Z tienen marcas d e tiempo de lectura y escritura
menores que las marcas de tiempo de las tres transacciones incluidas en el plan.
8. Sean las siguientes transacciones:
T1= r1(x), r1(y), Y:= x+2y, w1(y), c1
T2= r2(y), r2(x), y:=x+y, w2(y), r2(z), z:=z-y, w2(z), c2
T3= r3(z), r3(y), z1:=z+y, r3(z), z:=z+z1, w3(z), c3
Y sea el siguiente plan de ejecución:
P= r2(y), r1(x), r1(y), r3(z), y:= x+2y, w1(y), r2(x), y:=x+y, r3(y), z1:=z+y,
  c1, w2(y), r2(z), z:=z-y, w2(z), c2, r3(z), z:=z+z1, w3(z), c3
Comprueba qué protocolos de los vistos en clase (B2F, OMT y MV) permitirían dicho plan. Indica cual será
el valor de los elementos de datos X, Y y Z al terminar el plan, suponiendo que sus valores iniciales son 1,
![Page 1, Figure 1](subjects/Dbd/Teoria/Tema 4/Cuestiones _T4_-images/Cuestiones _T4__page_001.png)
![Page 1, Figure 2](subjects/Dbd/Teoria/Tema 4/Cuestiones _T4_-images/Cuestiones _T4__page_001_img_001.png)
![Page 1, Figure 3](subjects/Dbd/Teoria/Tema 4/Cuestiones _T4_-images/Cuestiones _T4__page_001_img_002.png)
![Page 1, Figure 4](subjects/Dbd/Teoria/Tema 4/Cuestiones _T4_-images/Cuestiones _T4__page_001_img_003.png)

### Page 2
Departamento de Sistemas Informáticos y Computación
          2
2 y 3 respectivamente.
9. Dadas las siguientes transacciones y el estado del diario que se muestra a continuación:
T1= r1(A), r1(D), w1(D), c1
T2= r2(B), w2(B), r2(D), w2(D), c2
T3= r3(C), w3(B), r3(A)

Diario:

[inicio, T3]
[leer, T3, C]
[escribir, T3, B, 15, 12]
[inicio, T2]
[leer, T2, B]
[escribir, T2, B, 12, 18]
[inicio, T1]
[leer, T1, A]
[leer, T1, D]
[escribir, T1, D, 20, 25]
[leer, T2, D]
[confirmar, T1]
[escribir, T2, D, 25, 26]
[confirmar, T2]
[leer, T3, A]
Fallo del sistema (con pérdida de memoria principal)
¿Cómo es el plan de ejecución concurrente desde el punto de vista de la recuperación? ¿Cómo se hará la
recuperación en el caso de actualización INMEDIATA/NO FORZAR?
10. Sea el siguiente plan de ejecución de tres transacciones en el que la primera instrucción de cada
transacción marca su inicio y donde los ti son instantes de tiempo (ti < tj  si i < j):

Suponiendo que se aplica el protocolo OMT:
a) ¿Cuáles son las marcas de tiempo de las transacciones expresadas en término de los instantes ti?
b) ¿Cuál es el plan en serie al que debería ser equivalente el plan concurrente anterior?
c) Si antes del inicio del plan, tanto MT_E(X) como MT_L(X) (marcas de tiempo de escritura y de lectura
de X) valen t’ donde t’ < t
0, indica qué valor tienen esas marcas de tiempo en cada instante t i (0≤ i
≤6). Si en algún instante el plan ya no es posible di por qué y explica qué problema se ha detectado.
11. Dado el siguiente plan de ejecución concurrente,
P= r1(x), r3(y), w1(x), r2(x), r1(y), w3(y), c1, w2(x), r3(x), c2, c3
Comprueba si los protocolos B2F explícito e implícito , OMT y multiversión  admiten el plan P. Indica las
operaciones que se realizan en cada uno de los instantes. Si el protocolo lo admite, ¿cuál es el plan en serie
equivalente por conflictos?
![Page 2, Figure 1](subjects/Dbd/Teoria/Tema 4/Cuestiones _T4_-images/Cuestiones _T4__page_002.png)
![Page 2, Figure 2](subjects/Dbd/Teoria/Tema 4/Cuestiones _T4_-images/Cuestiones _T4__page_002_img_001.png)
